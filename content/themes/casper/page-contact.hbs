{{!< default}}

{{! This is a page template. A page outputs content just like any other post, and has all the same
    attributes by default, but you can also customise it to behave differently if you prefer. }}

{{! Everything inside the #post tags pulls data from the page }}
{{#post}}

<header class="main-header post-head {{#if image}}" style="background-image: url({{image}}){{else}}no-cover{{/if}}">
    <nav class="main-nav {{#if image}}overlay{{/if}} clearfix">
        {{#if @blog.logo}}<a class="blog-logo" href="{{@blog.url}}"><img src="{{@blog.logo}}" alt="{{@blog.title}}" /></a>{{/if}}
        {{#if @blog.navigation}}
        {{/if}}
    </nav>
    <script src='https://www.google.com/recaptcha/api.js'></script>
</header>

<main class="content" role="main">
    <article class="">
        <div class="black-bg">
            <div id="docs-hero">
            <h1>Contact</h1>
        </div><!--/hero -->
        </div>
            <form id="contact-form" method="POST">
                <fieldset>
                    <legend>Say Hello!</legend>
                    <ul>
                        <li>
                            <label for="email">Email</label>
                            <input id="form-email" name="email" type="text" value="awesome@email.com">
                        </li>
                        <li>
                            <label for="msg"></label>
                            <input id="form-msg" name="msg" type="text">
                        </li>
                        <li>
                            <div class="g-recaptcha" data-sitekey="6LeRzAwTAAAAADpDxn8jJJ4T32cAh-sH4hLW-FyW"></div>
                        </li>
                        <li>
                            <input type="submit" value="Submit">
                        </li>
                    </ul>
                </fieldset>
            </form>
            <div id="form-feedback"></div>
        </div>
        {{content}}
    </article>
</main>
{{/post}}
<script type="text/javascript" src="{{asset "js/jquery-1.11.3.min.js"}}"></script>
<script>
    $( document ).ready(function() {
        $("#contact-form").submit(function(e){
            e.preventDefault();
            $.ajax({
                type: "POST",
                url: "https://hova-mailgun-server.herokuapp.com/",
                async: false,
                data: {
                    "email": $("#form-email").val(),
                    "msg": $("#form-msg").val(),
                    "g-recaptcha-response": grecaptcha.getResponse()
                },
                success: function(res) {
                    if (res === "Email successfully sent") {
                        $("#form-feedback").text("Email successfully sent");

                        // redirect the user to the homepage
                        // setTimeout(function(){
                        //     window.location = '/';
                        // }, 2000);
                    } else {
                        $("#form-feedback").text("Email error");
                    }
                    console.log(res);

                }
            });
            return true;
        });
    });
</script>
